{"meta":{"title":"樑仔实践学习笔记","subtitle":"天行健，君子于自强不息","description":"学习笔记，实践笔记","author":"樑仔","url":"http://code.cookily.cn"},"pages":[{"title":"404","date":"2018-02-23T16:10:59.000Z","updated":"2018-02-23T08:10:59.808Z","comments":true,"path":"404/index.html","permalink":"http://code.cookily.cn/404/index.html","excerpt":"","text":""},{"title":"关于我","date":"2018-02-23T16:11:28.000Z","updated":"2018-02-24T06:55:01.868Z","comments":true,"path":"about/index.html","permalink":"http://code.cookily.cn/about/index.html","excerpt":"","text":"理论上实践才是技术，停留在口头跟纸上谈兵有何区别！"},{"title":"tags","date":"2018-02-23T16:13:16.000Z","updated":"2018-02-23T08:13:16.662Z","comments":true,"path":"tags/index.html","permalink":"http://code.cookily.cn/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Centos7 安装 Tomcat8 集群","slug":"Centos7 安装 Tomcat8 集群","date":"2018-02-26T07:27:00.574Z","updated":"2018-02-26T07:27:00.575Z","comments":true,"path":"2018/02/26/Centos7 安装 Tomcat8 集群/","link":"","permalink":"http://code.cookily.cn/2018/02/26/Centos7 安装 Tomcat8 集群/","excerpt":"","text":"我使用centos7X64最小化安装CentOS-7-x86_64-Minimal-1708没装jdk的同学，请移步【centos7 安装 jdk8】的文章1.关闭firewall：123systemctl stop firewalld.service #停止firewallsystemctl disable firewalld.service #禁止firewall开机启动firewall-cmd --state #查看默认防火墙状态（关闭后显示notrunning，开启后显示running） 123[root@localhost ~]# firewall-cmd --statenot running[root@localhost ~]# 2.安装wget1yum -y install wget 3.下载tomcat81wget http://mirrors.shuosc.org/apache/tomcat/tomcat-8/v8.5.24/bin/apache-tomcat-8.5.24.tar.gz 4.解压1tar -zxvf apache-tomcat-8.5.24.tar.gz 5.移动到/usr/local1mv apache-tomcat-8.5.24 /usr/local/tomcat8-node1 6.配置tomcat的jdk环境变量1vi /usr/local/tomcat8-node1/conf/catalina.sh 在 OS specific support. 前面加入如下代码：12JAVA_HOME=/usr/local/java/jdk1.8.0_151JRE_HOME=$JAVA_HOME/jre 7.复制两份tomcat8-node1并重命名为tomcat8-node2，tomcat8-node312cp /usr/local/tomcat8-node1 /usr/local/tomcat8-node2cp /usr/local/tomcat8-node1 /usr/local/tomcat8-node3 8.修改tomcat8-node1,,tomcat8-node2和tomcat8-node3端口,共三处123vi /usr/local/tomcat8-node1/conf/server.xmlvi /usr/local/tomcat8-node2/conf/server.xmlvi /usr/local/tomcat8-node3/conf/server.xml 123&lt;Server port=&quot;8005&quot; shutdown=&quot;SHUTDOWN&quot;&gt;&lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot; redirectPort=&quot;8443&quot; /&gt;&lt;Connector port=&quot;8009&quot; protocol=&quot;AJP/1.3&quot; redirectPort=&quot;8443&quot; /&gt; 习惯上对应改为:123tomcat8-node1: 18005 18080 18009tomcat8-node2: 28005 28080 28009tomcat8-node3: 38005 38080 38009 7.配置tomcat8-node1,tomcat8-node2,tomcat8-node3开机启动在/usr/lib/systemd/system目录下增加tomcat8-node1.service,tomcat8-node2.service,tomcat8-node3.service文件，具体内容如下:1vi /usr/lib/systemd/system/tomcat8-node1.service 12345678910111213[Unit]Description=TomcatAfter=syslog.target network.target remote-fs.target nss-lookup.target [Service]Type=oneshotExecStart=/usr/local/tomcat8-node1/bin/startup.shExecStop=/usr/local/tomcat8-node1/bin/shutdown.shExecReload=/bin/kill -s HUP $MAINPIDRemainAfterExit=yes[Install]WantedBy=multi-user.target 1vi /usr/lib/systemd/system/tomcat8-node2.service 12345678910111213[Unit]Description=TomcatAfter=syslog.target network.target remote-fs.target nss-lookup.target [Service]Type=oneshotExecStart=/usr/local/tomcat8-node2/bin/startup.shExecStop=/usr/local/tomcat8-node2/bin/shutdown.shExecReload=/bin/kill -s HUP $MAINPIDRemainAfterExit=yes[Install]WantedBy=multi-user.target 1vi /usr/lib/systemd/system/tomcat8-node3.service 12345678910111213[Unit]Description=TomcatAfter=syslog.target network.target remote-fs.target nss-lookup.target [Service]Type=oneshotExecStart=/usr/local/tomcat8-node3/bin/startup.shExecStop=/usr/local/tomcat8-node3/bin/shutdown.shExecReload=/bin/kill -s HUP $MAINPIDRemainAfterExit=yes[Install]WantedBy=multi-user.target 8.允许tomcat8-node1,tomcat8-node2,tomcat8-node3开机启动123systemctl enable tomcat8-node1systemctl enable tomcat8-node2systemctl enable tomcat8-node3 9.tomcat8常见命令1234567systemctl start tomcat8-node1.service //启动tomcatsystemctl stop tomcat8-node1.service //关闭tomcat systemctl restart tomcat8-node1.service //重启tomcat systemctl status tomcat8-node1.service //查看状态tomcat","categories":[{"name":"Tomcat8 集群","slug":"Tomcat8-集群","permalink":"http://code.cookily.cn/categories/Tomcat8-集群/"},{"name":"Centos 7","slug":"Tomcat8-集群/Centos-7","permalink":"http://code.cookily.cn/categories/Tomcat8-集群/Centos-7/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://code.cookily.cn/tags/Hexo/"},{"name":"IntelliJ IDEA","slug":"IntelliJ-IDEA","permalink":"http://code.cookily.cn/tags/IntelliJ-IDEA/"},{"name":"Git","slug":"Git","permalink":"http://code.cookily.cn/tags/Git/"},{"name":"Github","slug":"Github","permalink":"http://code.cookily.cn/tags/Github/"},{"name":"Node.js","slug":"Node-js","permalink":"http://code.cookily.cn/tags/Node-js/"},{"name":"Centos 7","slug":"Centos-7","permalink":"http://code.cookily.cn/tags/Centos-7/"},{"name":"Tomcat8 集群","slug":"Tomcat8-集群","permalink":"http://code.cookily.cn/tags/Tomcat8-集群/"}]},{"title":"Centos7 安装 Tomcat8","slug":"Centos7 安装 Tomcat8","date":"2018-02-26T07:24:39.986Z","updated":"2018-02-26T07:24:39.987Z","comments":true,"path":"2018/02/26/Centos7 安装 Tomcat8/","link":"","permalink":"http://code.cookily.cn/2018/02/26/Centos7 安装 Tomcat8/","excerpt":"","text":"我使用centos7X64最小化安装CentOS-7-x86_64-Minimal-1708没装jdk的同学，请移步【centos7 安装 jdk8】的文章1.关闭firewall：123systemctl stop firewalld.service #停止firewallsystemctl disable firewalld.service #禁止firewall开机启动firewall-cmd --state #查看默认防火墙状态（关闭后显示notrunning，开启后显示running） 123[root@localhost ~]# firewall-cmd --statenot running[root@localhost ~]# 2.安装wget1yum -y install wget 3.下载tomcat81wget http://mirrors.shuosc.org/apache/tomcat/tomcat-8/v8.5.24/bin/apache-tomcat-8.5.24.tar.gz 4.解压1tar -zxvf apache-tomcat-8.5.24.tar.gz 5.移动到/usr/local1mv apache-tomcat-8.5.24 /usr/local/tomcat8 6.配置tomcat的jdk环境变量1vi /usr/local/tomcat8/conf/catalina.sh 在 OS specific support. 前面加入如下代码：12JAVA_HOME=/usr/local/java/jdk1.8.0_151JRE_HOME=$JAVA_HOME/jre 7.配置tomcat8开机启动在/usr/lib/systemd/system目录下增加tomcat8.service文件，内容如下:1vi /usr/lib/systemd/system/tomcat8.service 12345678910111213[Unit]Description=TomcatAfter=syslog.target network.target remote-fs.target nss-lookup.target [Service]Type=oneshotExecStart=/usr/local/tomcat8/bin/startup.shExecStop=/usr/local/tomcat8/bin/shutdown.shExecReload=/bin/kill -s HUP $MAINPIDRemainAfterExit=yes[Install]WantedBy=multi-user.target 8.允许tomcat8开机启动systemctl enable tomcat8 9.tomcat8常见命令1234567systemctl start tomcat8.service //启动tomcatsystemctl stop tomcat8.service //关闭tomcat systemctl restart tomcat8.service //重启tomcat systemctl status tomcat8.service //查看状态tomcat","categories":[{"name":"Tomcat8","slug":"Tomcat8","permalink":"http://code.cookily.cn/categories/Tomcat8/"},{"name":"Centos 7","slug":"Tomcat8/Centos-7","permalink":"http://code.cookily.cn/categories/Tomcat8/Centos-7/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://code.cookily.cn/tags/Hexo/"},{"name":"IntelliJ IDEA","slug":"IntelliJ-IDEA","permalink":"http://code.cookily.cn/tags/IntelliJ-IDEA/"},{"name":"Git","slug":"Git","permalink":"http://code.cookily.cn/tags/Git/"},{"name":"Github","slug":"Github","permalink":"http://code.cookily.cn/tags/Github/"},{"name":"Node.js","slug":"Node-js","permalink":"http://code.cookily.cn/tags/Node-js/"},{"name":"Centos 7","slug":"Centos-7","permalink":"http://code.cookily.cn/tags/Centos-7/"},{"name":"Tomcat8","slug":"Tomcat8","permalink":"http://code.cookily.cn/tags/Tomcat8/"}]},{"title":"Centos7 Keepalived+Nginx 热备","slug":"Centos7 Keepalived+Nginx 热备","date":"2018-02-26T07:18:01.806Z","updated":"2018-02-26T07:18:01.807Z","comments":true,"path":"2018/02/26/Centos7 Keepalived+Nginx 热备/","link":"","permalink":"http://code.cookily.cn/2018/02/26/Centos7 Keepalived+Nginx 热备/","excerpt":"","text":"我使用centos7X64最小化安装CentOS-7-x86_64-Minimal-1708123nginx_01 ip:192.168.59.128 主机nginx_02 ip:192.168.59.129 从机漂浮ip：192.168.59.130 1.关闭firewall：123systemctl stop firewalld.service #停止firewallsystemctl disable firewalld.service #禁止firewall开机启动firewall-cmd --state #查看默认防火墙状态（关闭后显示notrunning，开启后显示running） 123[root@localhost ~]# firewall-cmd --statenot running[root@localhost ~]# 2、安装keepalived12yum install keepalivedkeepalived -v 3.先备份配置文件在nginx_01上配置1cp /etc/keepalived/keepalived.conf /etc/keepalived/keepalived.conf.bak 1vim /etc/keepalived/keepalived.conf 修改成如下内容1234567891011121314151617181920212223242526272829303132333435! Configuration File for keepalivedglobal_defs &#123; router_id nginx_server_1&#125;vrrp_script chk_nginx &#123; script &quot;/etc/keepalived/nginx_check.sh&quot; interval 2 weight 20 !weight为正数 !如果脚本执行结果为0,,Master:weight+priority&gt;Backup:weight+priority(不切换) !如果脚本执行结果不为0,Master:priority&lt;Backup:priority+weight(切换) !weight为负数 !如果脚本执行结果为0,,Master:priority&gt;Backup:priority(不切换) !如果脚本执行结果不为0,Master:priority+weight&lt;Backup:priority(切换) !一般来说,weight的绝对值要大于Master和Backup的priority之差&#125;vrrp_instance VI_1 &#123; state MASTER interface ens33 !网卡接口地址 virtual_router_id 51 mcast_src_ip 192.168.59.128 !nginx01 ip priority 100 nopreempt advert_int 1 authentication &#123; auth_type PASS auth_pass 1111 !认密码 两台nginx密码要一致 &#125; track_script &#123; chk_nginx &#125; virtual_ipaddress &#123; 192.168.59.222/24 !漂浮ip 可以有多个 回车隔开 &#125;&#125; 在nginx_02上配置1cp /etc/keepalived/keepalived.conf /etc/keepalived/keepalived.conf.bak 1vi /etc/keepalived/keepalived.conf 修改成如下内容注意:state 和主不一样，是BACKUProute_id 和主不一样priority 小于主机1234567891011121314151617181920212223242526272829303132333435! Configuration File for keepalivedglobal_defs &#123; router_id nginx_server_2&#125;vrrp_script chk_nginx &#123; script &quot;/etc/keepalived/nginx_check.sh&quot; interval 2 weight 20 !weight为正数 !如果脚本执行结果为0,,Master:weight+priority&gt;Backup:weight+priority(不切换) !如果脚本执行结果不为0,Master:priority&lt;Backup:priority+weight(切换) !weight为负数 !如果脚本执行结果为0,,Master:priority&gt;Backup:priority(不切换) !如果脚本执行结果不为0,Master:priority+weight&lt;Backup:priority(切换) !一般来说,weight的绝对值要大于Master和Backup的priority之差&#125;vrrp_instance VI_1 &#123; state BACKUP interface ens33 virtual_router_id 51 mcast_src_ip 192.168.59.129 priority 90 nopreempt advert_int 1 authentication &#123; auth_type PASS auth_pass 1111 &#125; track_script &#123; chk_nginx &#125; virtual_ipaddress &#123; 192.168.59.222/24 &#125;&#125; 4.检查nginx进程的代码,当nginx进程奔溃后，keepalived自动启动nginx在nginx_01和nginx_02上都配置一遍1vim /etc/keepalived/nginx_check.sh 添加如下代码12345678910#!/bin/bashA=`ps -C nginx --no-header |wc -l`if [ $A -eq 0 ];then /usr/sbin/nginx sleep 2 if [ `ps -C nginx --no-header |wc -l` -eq 0 ];then killall keepalived fifi 5.改成可执行文件在nginx_01和nginx_02上都配置一遍1chmod +xxx /etc/keepalived/nginx_check.sh 6.启动和开机自启动在nginx_01和nginx_02上都配置一遍12systemctl start keepalived //启动systemctl enable keepalived //开机自启动","categories":[{"name":"Nginx","slug":"Nginx","permalink":"http://code.cookily.cn/categories/Nginx/"},{"name":"Keepalived","slug":"Nginx/Keepalived","permalink":"http://code.cookily.cn/categories/Nginx/Keepalived/"},{"name":"Centos 7","slug":"Nginx/Keepalived/Centos-7","permalink":"http://code.cookily.cn/categories/Nginx/Keepalived/Centos-7/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://code.cookily.cn/tags/Hexo/"},{"name":"IntelliJ IDEA","slug":"IntelliJ-IDEA","permalink":"http://code.cookily.cn/tags/IntelliJ-IDEA/"},{"name":"Git","slug":"Git","permalink":"http://code.cookily.cn/tags/Git/"},{"name":"Github","slug":"Github","permalink":"http://code.cookily.cn/tags/Github/"},{"name":"Node.js","slug":"Node-js","permalink":"http://code.cookily.cn/tags/Node-js/"},{"name":"Centos 7","slug":"Centos-7","permalink":"http://code.cookily.cn/tags/Centos-7/"},{"name":"Nginx","slug":"Nginx","permalink":"http://code.cookily.cn/tags/Nginx/"},{"name":"Keepalived","slug":"Keepalived","permalink":"http://code.cookily.cn/tags/Keepalived/"}]},{"title":"Centos7 Nginx 安装","slug":"Centos7 Nginx 安装","date":"2018-02-26T06:56:14.016Z","updated":"2018-02-26T06:56:14.017Z","comments":true,"path":"2018/02/26/Centos7 Nginx 安装/","link":"","permalink":"http://code.cookily.cn/2018/02/26/Centos7 Nginx 安装/","excerpt":"","text":"我使用centos7X64最小化安装CentOS-7-x86_64-Minimal-17081.关闭firewall：123systemctl stop firewalld.service #停止firewallsystemctl disable firewalld.service #禁止firewall开机启动firewall-cmd --state #查看默认防火墙状态（关闭后显示notrunning，开启后显示running） 123[root@localhost ~]# firewall-cmd --statenot running[root@localhost ~]# 2.安装wget1yum -y install wget 3.安装nginx 编译环境1234yum install gcc-c++yum install -y pcre pcre-develyum install -y zlib zlib-develyum install -y openssl openssl-devel 4.安装nginx官方查看最新稳定版本 官网链接直达我现在最新稳定版本是:nginx-1.12.21wget -c https://nginx.org/download/nginx-1.12.2.tar.gz 5.解压12tar -zxvf nginx-1.12.2.tar.gzcd nginx-1.12.2 6.配置nginx1./configure 7.编译安装12makemake install 8.启动、停止、重启nginx12345cd /usr/local/nginx/sbin/./nginx ./nginx -s reload #重新加载配置文件./nginx -s quit #:推荐 待nginx进程处理任务完毕进行停止./nginx -s stop #:先查出nginx进程id再使用kill命令强制杀掉进程。 9.查询nginx进程：1ps aux|grep nginx 10.开机自启动在rc.local增加启动代码就可以了。1vi /etc/rc.local 底部增加一行 /usr/local/nginx/sbin/nginx设置执行权限：1chmod 755 /etc/rc.local","categories":[{"name":"Nginx","slug":"Nginx","permalink":"http://code.cookily.cn/categories/Nginx/"},{"name":"Centos 7","slug":"Nginx/Centos-7","permalink":"http://code.cookily.cn/categories/Nginx/Centos-7/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://code.cookily.cn/tags/Hexo/"},{"name":"IntelliJ IDEA","slug":"IntelliJ-IDEA","permalink":"http://code.cookily.cn/tags/IntelliJ-IDEA/"},{"name":"Git","slug":"Git","permalink":"http://code.cookily.cn/tags/Git/"},{"name":"Github","slug":"Github","permalink":"http://code.cookily.cn/tags/Github/"},{"name":"Node.js","slug":"Node-js","permalink":"http://code.cookily.cn/tags/Node-js/"},{"name":"Centos 7","slug":"Centos-7","permalink":"http://code.cookily.cn/tags/Centos-7/"},{"name":"Nginx","slug":"Nginx","permalink":"http://code.cookily.cn/tags/Nginx/"}]},{"title":"mysql 用户创建+密码修改+删除用户+角色分配","slug":"mysql 用户创建+密码修改+删除用户+角色分配","date":"2018-02-26T06:51:38.277Z","updated":"2018-02-26T06:51:38.278Z","comments":true,"path":"2018/02/26/mysql 用户创建+密码修改+删除用户+角色分配/","link":"","permalink":"http://code.cookily.cn/2018/02/26/mysql 用户创建+密码修改+删除用户+角色分配/","excerpt":"","text":"12345678当前mysql版本mysql&gt; select version();+------------+| version() |+------------+| 5.6.38 |+------------+1 row in set (0.00 sec) 1.创建用户:1CREATE USER &apos;username&apos;@&apos;host&apos; IDENTIFIED BY &apos;password&apos;; 123username：你将创建的用户名host：指定该用户在哪个主机上可以登陆，如果是本地用户可用localhost，如果想让该用户可以从任意远程主机登陆，可以使用通配符%password：该用户的登陆密码，密码可以为空，如果为空则该用户可以不需要密码登陆服务器 举个栗子:创建张三用户，密码123456，可以从任意远程主机登陆(%)如果是本地用户可用(localhost)1CREATE USER &apos;zhangsan&apos;@&apos;%&apos; IDENTIFIED BY &apos;123456&apos;; 2. 授权:1GRANT privileges ON databasename.tablename TO &apos;username&apos;@&apos;host&apos; 123privileges：用户的操作权限，如SELECT，INSERT，UPDATE等，如果要授予所的权限则使用ALLdatabasename：数据库名tablename：表名，如果要授予该用户对所有数据库和表的相应操作权限则可用*表示，如*.* 举个栗子:给予zhangsan用户,在任意远程主机对bilibili库的a表select和insert权限1GRANT SELECT, INSERT ON bilibili.a TO &apos;zhangsan&apos;@&apos;%&apos;; 给予zhangsan用户,在任意远程主机所有库所有权限1GRANT ALL ON *.* TO &apos;zhangsan&apos;@&apos;%&apos;; 如果授予权限要传递，那就在屁股跟上WITH GRANT OPTION;1GRANT ALL ON *.* TO &apos;zhangsan&apos;@&apos;%&apos; WITH GRANT OPTION; 3.设置与更改用户密码1SET PASSWORD FOR &apos;username&apos;@&apos;host&apos; = PASSWORD(&apos;newpassword&apos;); 如果是当前登陆用户用也可以使用：1SET PASSWORD = PASSWORD(&quot;newpassword&quot;); 4. 撤销用户权限1REVOKE privilege ON databasename.tablename FROM &apos;username&apos;@&apos;host&apos;; 123privileges：用户的操作权限，如SELECT，INSERT，UPDATE等，如果要授予所的权限则使用ALLdatabasename：数据库名tablename：表名，如果要授予该用户对所有数据库和表的相应操作权限则可用*表示，如*.* 举个栗子:取消zhangsan对bilibili库的a表select权限1REVOKE SELECT ON bilibili.a FROM &apos;zhangsan&apos;@&apos;%&apos;; 假如你在给用户‘zhangsan‘@’%’授权的时候是这样的（或类似的）：GRANT SELECT ON bilibili.a TO ‘zhangsan‘@’%’则在使用REVOKE SELECT ON . FROM ‘zhangsan‘@’%’;命令并不能撤销该用户对test数据库中user表的SELECT 操作。相反，如果授权使用的是GRANT SELECT ON . TO ‘zhangsan‘@’%’;则REVOKE SELECT ON bilibili.a FROM ‘zhangsan‘@’%’;命令也不能撤销该用户对test数据库中user表的Select权限。具体信息可以用命令SHOW GRANTS FOR ‘zhangsan‘@’%’; 查看。5.然后删除用户1DROP USER &apos;username&apos;@&apos;host&apos;; 举个栗子:删除zhangsan用户1DROP USER &apos;zhangsan&apos;@&apos;%&apos;;","categories":[{"name":"mysql","slug":"mysql","permalink":"http://code.cookily.cn/categories/mysql/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://code.cookily.cn/tags/Hexo/"},{"name":"IntelliJ IDEA","slug":"IntelliJ-IDEA","permalink":"http://code.cookily.cn/tags/IntelliJ-IDEA/"},{"name":"Git","slug":"Git","permalink":"http://code.cookily.cn/tags/Git/"},{"name":"Github","slug":"Github","permalink":"http://code.cookily.cn/tags/Github/"},{"name":"Node.js","slug":"Node-js","permalink":"http://code.cookily.cn/tags/Node-js/"},{"name":"mysql","slug":"mysql","permalink":"http://code.cookily.cn/tags/mysql/"}]},{"title":"Centos7 安装  jdk8","slug":"Centos7 安装  jdk8","date":"2018-02-26T06:48:30.132Z","updated":"2018-02-26T06:48:30.134Z","comments":true,"path":"2018/02/26/Centos7 安装  jdk8/","link":"","permalink":"http://code.cookily.cn/2018/02/26/Centos7 安装  jdk8/","excerpt":"","text":"我使用centos7X64最小化安装CentOS-7-x86_64-Minimal-17081.安装wget1yum -y install wget 2.下载jdk81wget http://download.oracle.com/otn-pub/java/jdk/8u151-b12/e758a0de34e24606bca991d704f6dcbf/jdk-8u151-linux-x64.tar.gz?AuthParam=1515389081_199e6be1d23489a50e55e6979e5f31c9 若失效，官网自己查下载地址3.解压1tar -zxvf jdk-8u151-linux-x64.tar.gz?AuthParam=1515389081_199e6be1d23489a50e55e6979e5f31c9 4.移动到/usr/local/java/jdk1.8.0_1511mkdir -p /usr/local/java 1mv jdk1.8.0_151/ /usr/local/java/jdk1.8.0_151 5.设置环境变量1vi /etc/profile 文件最后加入：123export JAVA_HOME=/usr/local/java/jdk1.8.0_151export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jarexport PATH=$PATH:$JAVA_HOME/bin 6.配置文件立即生效1source /etc/profile 7.查看是否安装成功1java 1javac","categories":[{"name":"JDK8","slug":"JDK8","permalink":"http://code.cookily.cn/categories/JDK8/"},{"name":"Centos 7","slug":"JDK8/Centos-7","permalink":"http://code.cookily.cn/categories/JDK8/Centos-7/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://code.cookily.cn/tags/Hexo/"},{"name":"IntelliJ IDEA","slug":"IntelliJ-IDEA","permalink":"http://code.cookily.cn/tags/IntelliJ-IDEA/"},{"name":"Git","slug":"Git","permalink":"http://code.cookily.cn/tags/Git/"},{"name":"Github","slug":"Github","permalink":"http://code.cookily.cn/tags/Github/"},{"name":"Node.js","slug":"Node-js","permalink":"http://code.cookily.cn/tags/Node-js/"},{"name":"Centos 7","slug":"Centos-7","permalink":"http://code.cookily.cn/tags/Centos-7/"},{"name":"JDK8","slug":"JDK8","permalink":"http://code.cookily.cn/tags/JDK8/"}]},{"title":"Centos 7 下安装 Docker-compose","slug":"Centos 7 下安装 docker-compose","date":"2018-02-24T08:59:59.024Z","updated":"2018-02-24T08:59:59.024Z","comments":true,"path":"2018/02/24/Centos 7 下安装 docker-compose/","link":"","permalink":"http://code.cookily.cn/2018/02/24/Centos 7 下安装 docker-compose/","excerpt":"","text":"系统:Centos 7 64bitPIP 安装 docker-compose 要先安装python-pip包，所以我们先安装装python-pip1、首先检查linux有没有安装python-pip包，直接执行1yum install python-pip 2、没有python-pip包就执行命令1yum -y install epel-release 3、执行成功之后，再次执行1yum install python-pip 4、对安装好的pip进行升级1pip install --upgrade pip 5、安装docker-compose命令1pip install -U docker-compose 6、安装成功后，可以查看 docker-compose 命令的用法1docker-compose -h 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253[root@docker2 haproxy]# docker-compose -hDefine and run multi-container applications with Docker.Usage: docker-compose [-f &lt;arg&gt;...] [options] [COMMAND] [ARGS...] docker-compose -h|--helpOptions: -f, --file FILE Specify an alternate compose file (default: docker-compose.yml) -p, --project-name NAME Specify an alternate project name (default: directory name) --verbose Show more output --no-ansi Do not print ANSI control characters -v, --version Print version and exit -H, --host HOST Daemon socket to connect to --tls Use TLS; implied by --tlsverify --tlscacert CA_PATH Trust certs signed only by this CA --tlscert CLIENT_CERT_PATH Path to TLS certificate file --tlskey TLS_KEY_PATH Path to TLS key file --tlsverify Use TLS and verify the remote --skip-hostname-check Don&apos;t check the daemon&apos;s hostname against the name specified in the client certificate (for example if your docker host is an IP address) --project-directory PATH Specify an alternate working directory (default: the path of the Compose file)Commands: build Build or rebuild services bundle Generate a Docker bundle from the Compose file config Validate and view the Compose file create Create services down Stop and remove containers, networks, images, and volumes events Receive real time events from containers exec Execute a command in a running container help Get help on a command images List images kill Kill containers logs View output from containers pause Pause services port Print the public port for a port binding ps List containers pull Pull service images push Push service images restart Restart services rm Remove stopped containers run Run a one-off command scale Set number of containers for a service start Start services stop Stop services top Display the running processes unpause Unpause services up Create and start containers version Show the Docker-Compose version information 7、可以添加 bash 补全命令1curl -L https://raw.githubusercontent.com/docker/compose/1.2.0/contrib/completion/bash/docker-compose &gt; /etc/bash_completion.d/docker-compose","categories":[{"name":"Docker","slug":"Docker","permalink":"http://code.cookily.cn/categories/Docker/"},{"name":"Docker-compose","slug":"Docker/Docker-compose","permalink":"http://code.cookily.cn/categories/Docker/Docker-compose/"},{"name":"Centos 7","slug":"Docker/Docker-compose/Centos-7","permalink":"http://code.cookily.cn/categories/Docker/Docker-compose/Centos-7/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://code.cookily.cn/tags/Hexo/"},{"name":"IntelliJ IDEA","slug":"IntelliJ-IDEA","permalink":"http://code.cookily.cn/tags/IntelliJ-IDEA/"},{"name":"Git","slug":"Git","permalink":"http://code.cookily.cn/tags/Git/"},{"name":"Github","slug":"Github","permalink":"http://code.cookily.cn/tags/Github/"},{"name":"Node.js","slug":"Node-js","permalink":"http://code.cookily.cn/tags/Node-js/"},{"name":"Docker，Centos 7","slug":"Docker，Centos-7","permalink":"http://code.cookily.cn/tags/Docker，Centos-7/"},{"name":"Docker-compose","slug":"Docker-compose","permalink":"http://code.cookily.cn/tags/Docker-compose/"}]},{"title":"Centos 7 安装最新 Docker 并实现阿里云加速 网易加速","slug":"Centos 7 安装最新 docker 并实现阿里云加速 网易加速","date":"2018-02-24T08:59:58.981Z","updated":"2018-02-24T08:59:58.982Z","comments":true,"path":"2018/02/24/Centos 7 安装最新 docker 并实现阿里云加速 网易加速/","link":"","permalink":"http://code.cookily.cn/2018/02/24/Centos 7 安装最新 docker 并实现阿里云加速 网易加速/","excerpt":"","text":"系统:Centos 7 64bit直接用yum install docker -y安装的docker版本为1.12，但是docker发展很快，现在都17.12.0了。docker-ce是指docker的社区版1.首先卸载旧版本docker及相关依赖1yum remove docker docker-common container-selinux docker-selinux docker-engine 2.安装 yum-utils，它提供了 yum-config-manager，可用来管理yum源1yum install -y yum-utils 3.添加yum源1yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo 4.更新yum索引1yum makecache fast 5.安装 docker-ce1yum install docker-ce 6.启动 docker1systemctl start docker 7.验证是否安装成功1docker run hello-world 8.阿里云加速8.1首先注册开通阿里云开发者帐号注册开通阿里云开发者 8.2登录后在个人中心点击加速器，同时会给出加速器地址。8.3选择对应的系统并根据自己的docker版本执行相应的步骤；8.4Docker客户端版本大于1.10的用户 可以通过修改daemon配置文件/etc/docker/daemon.json来使用加速器：12345678sudo mkdir -p /etc/dockersudo tee /etc/docker/daemon.json &lt;&lt;-&apos;EOF&apos;&#123; &quot;registry-mirrors&quot;: [&quot;https://1jdvuba1.mirror.aliyuncs.com&quot;]&#125;EOFsudo systemctl daemon-reloadsudo systemctl restart docker 9.网易加速12345678sudo mkdir -p /etc/dockersudo tee /etc/docker/daemon.json &lt;&lt;-&apos;EOF&apos;&#123; &quot;registry-mirrors&quot;: [&quot;http://hub-mirror.c.163.com&quot;]&#125;EOFsudo systemctl daemon-reloadsudo systemctl restart docker 后记阿里云提供的安装方式step 1: 安装必要的一些系统工具1sudo yum install -y yum-utils device-mapper-persistent-data lvm2 Step 2: 添加软件源信息1sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo Step 3: 更新并安装 Docker-CE12sudo yum makecache fastsudo yum -y install docker-ce Step 4: 开启Docker服务1sudo service docker start Step 5: 查看Docker版本12345678910111213141516171819docker versionClient: Version: 17.12.0-ce API version: 1.35 Go version: go1.9.2 Git commit: c97c6d6 Built: Wed Dec 27 20:10:14 2017 OS/Arch: linux/amd64Server: Engine: Version: 17.12.0-ce API version: 1.35 (minimum version 1.12) Go version: go1.9.2 Git commit: c97c6d6 Built: Wed Dec 27 20:12:46 2017 OS/Arch: linux/amd64 Experimental: false","categories":[{"name":"Docker","slug":"Docker","permalink":"http://code.cookily.cn/categories/Docker/"},{"name":"阿里云加速","slug":"Docker/阿里云加速","permalink":"http://code.cookily.cn/categories/Docker/阿里云加速/"},{"name":"网易加速","slug":"Docker/阿里云加速/网易加速","permalink":"http://code.cookily.cn/categories/Docker/阿里云加速/网易加速/"},{"name":"Centos 7","slug":"Docker/阿里云加速/网易加速/Centos-7","permalink":"http://code.cookily.cn/categories/Docker/阿里云加速/网易加速/Centos-7/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://code.cookily.cn/tags/Hexo/"},{"name":"IntelliJ IDEA","slug":"IntelliJ-IDEA","permalink":"http://code.cookily.cn/tags/IntelliJ-IDEA/"},{"name":"Git","slug":"Git","permalink":"http://code.cookily.cn/tags/Git/"},{"name":"Github","slug":"Github","permalink":"http://code.cookily.cn/tags/Github/"},{"name":"Node.js","slug":"Node-js","permalink":"http://code.cookily.cn/tags/Node-js/"},{"name":"Docker，Centos 7","slug":"Docker，Centos-7","permalink":"http://code.cookily.cn/tags/Docker，Centos-7/"},{"name":"阿里云加速","slug":"阿里云加速","permalink":"http://code.cookily.cn/tags/阿里云加速/"},{"name":"网易加速","slug":"网易加速","permalink":"http://code.cookily.cn/tags/网易加速/"}]},{"title":"Centos 7 下 docker 安装MySQL 和使用 内部连接和外部连接","slug":"Centos 7 下 docker 安装mysql 和使用 内部连接和外部连接","date":"2018-02-24T08:59:58.939Z","updated":"2018-02-24T08:59:58.939Z","comments":true,"path":"2018/02/24/Centos 7 下 docker 安装mysql 和使用 内部连接和外部连接/","link":"","permalink":"http://code.cookily.cn/2018/02/24/Centos 7 下 docker 安装mysql 和使用 内部连接和外部连接/","excerpt":"","text":"参考：阿里mysql docker 文档1.首先查看下仓库镜像1docker search mysql 123456789101112131415161718192021222324252627[root@iZ0p61por0uylmZ ~]# docker search mysqlNAME DESCRIPTION STARS OFFICIAL AUTOMATEDmysql MySQL is a widely used, open-source relation… 5676 [OK] mariadb MariaDB is a community-developed fork of MyS… 1760 [OK] mysql/mysql-server Optimized MySQL Server Docker images. Create… 390 [OK]zabbix/zabbix-server-mysql Zabbix Server with MySQL database support 78 [OK]hypriot/rpi-mysql RPi-compatible Docker Image with Mysql 78 centurylink/mysql Image containing mysql. Optimized to be link… 58 [OK]zabbix/zabbix-web-nginx-mysql Zabbix frontend based on Nginx web-server wi… 41 [OK]tutum/mysql Base docker image to run a MySQL database se… 31 1and1internet/ubuntu-16-nginx-php-phpmyadmin-mysql-5 ubuntu-16-nginx-php-phpmyadmin-mysql-5 25 [OK]mysql/mysql-cluster Experimental MySQL Cluster Docker images. Cr… 19 centos/mysql-57-centos7 MySQL 5.7 SQL database server 17 schickling/mysql-backup-s3 Backup MySQL to S3 (supports periodic backup… 16 [OK]linuxserver/mysql A Mysql container, brought to you by LinuxSe… 14 zabbix/zabbix-proxy-mysql Zabbix proxy with MySQL database support 10 [OK]centos/mysql-56-centos7 MySQL 5.6 SQL database server 7 openshift/mysql-55-centos7 DEPRECATED: A Centos7 based MySQL v5.5 image… 6 circleci/mysql MySQL is a widely used, open-source relation… 3 frodenas/mysql A Docker Image for MySQL 3 [OK]dsteinkopf/backup-all-mysql backup all DBs in a mysql server 3 [OK]inferlink/landmark-mysql landmark-mysql 0 [OK]cloudposse/mysql Improved `mysql` service with support for `m… 0 [OK]cloudfoundry/cf-mysql-ci Image used in CI of cf-mysql-release 0 openzipkin/zipkin-mysql Mirror of https://quay.io/repository/openzip… 0 astronomerio/mysql-sink MySQL sink 0 [OK]ansibleplaybookbundle/mysql-apb An APB which deploys RHSCL MySQL 0 [OK] 2.然后从hub.docker.com或者第三方有加速的docker网站查看mysql镜像版本阿里mysql docker镜像连接12348.0.3, 8.0, 8 (8.0/Dockerfile)5.7.20, 5.7, 5, latest (5.7/Dockerfile)5.6.38, 5.6 (5.6/Dockerfile)5.5.58, 5.5 (5.5/Dockerfile) 3.我选择5.6.38版本下载1docker pull mysql:5.6.38 1234567891011121314[root@iZ0p61por0uylmZ ~]# docker pull mysql:5.6.385.6.38: Pulling from library/mysqlf49cf87b52c1: Pull complete 78032de49d65: Pull complete 837546b20bc4: Pull complete 9b8316af6cc6: Pull complete 28dd7bab809d: Pull complete 8b95be8b8d36: Pull complete 67ee8c6f60b5: Pull complete 74616d0d8b72: Pull complete 6246d987d47e: Pull complete 66cd90934fab: Pull complete Digest: sha256:078c9e0486639831d44c18ec8bc545e20ca74419822387c3eab2ea54a8e71515Status: Downloaded newer image for mysql:5.6.38 4.查看本地镜像 可以看到已经在本地仓库1docker images 123[root@iZ0p61por0uylmZ ~]# docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEmysql 5.6.38 15a5ee56ec55 6 weeks ago 299MB 5.开启mysql一个容器(就是我们平常所说的实例)1docker run --name mysql5.6.38 -e MYSQL_ROOT_PASSWORD=root -d -p 3306:3306 mysql:5.6.38 1-e MYSQL_ROOT_PASSWORD=root 初始化密码 123456[root@iZ0p61por0uylmZ ~]# docker run --name mysql5.6.38 -e MYSQL_ROOT_PASSWORD=root -d -p 3306:3306 mysql:5.6.381794aed7cfe17c7a8df7c1403a25feaecced3ccbef3844c9240bb0c8e27c2b85[root@iZ0p61por0uylmZ ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES1794aed7cfe1 mysql:5.6.38 &quot;docker-entrypoint.s…&quot; 7 seconds ago Up 6 seconds 0.0.0.0:3306-&gt;3306/tcp mysql5.6.38 6.mysql远程连接navicat远程连接mysql容器 –&gt; 外网地址:3306如果是阿里云esc服务器,安全组3306端口要开放7.如果是在同一个docker下的容器要连接mysql7.1别名访问比如tomcat连接mysql,那tomcat的启动参数里要加–linl连接1docker run --name tomcat重新命名 --link mysql5.6.38:别名 -d tomcat仓库名 123在tomcat容器里的mysql连接地址就写为:别名比如：jdbc:mysql://192.168.123.123:3306就写为:jdbc:mysql://别名:3306 7.2内网ip访问获取mysql容器内网ip地址1docker inspect --format=&apos;&#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;&apos; mysql5.6.38 123456[root@iZ0p61por0uylmZ ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES432bd371973f tomcat:8.5.24 &quot;catalina.sh run&quot; 12 minutes ago Up 12 minutes 0.0.0.0:8080-&gt;8080/tcp tomcat8.5.241794aed7cfe1 mysql:5.6.38 &quot;docker-entrypoint.s…&quot; 3 hours ago Up About an hour 0.0.0.0:3306-&gt;3306/tcp mysql5.6.38[root@iZ0p61por0uylmZ ~]# docker inspect --format=&apos;&#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;&apos; mysql5.6.38172.17.0.2 123在tomcat容器里的mysql连接地址就写为:内网ip比如：jdbc:mysql://192.168.123.123:3306jdbc:mysql://172.17.0.2:3306 8.进入mysql容器1docker exec -it 容器id或者容器名字 /bin/bash 123456[root@iZ0p61por0uylmZ ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES1794aed7cfe1 mysql:5.6.38 &quot;docker-entrypoint.s…&quot; 29 minutes ago Up 29 minutes 0.0.0.0:3306-&gt;3306/tcp mysql5.6.38[root@iZ0p61por0uylmZ ~]# docker exec -it 1794aed7cfe1 /bin/bashroot@1794aed7cfe1:/# 拿到shell,收工","categories":[{"name":"Docker","slug":"Docker","permalink":"http://code.cookily.cn/categories/Docker/"},{"name":"MySQL","slug":"Docker/MySQL","permalink":"http://code.cookily.cn/categories/Docker/MySQL/"},{"name":"Centos 7","slug":"Docker/MySQL/Centos-7","permalink":"http://code.cookily.cn/categories/Docker/MySQL/Centos-7/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"http://code.cookily.cn/tags/Docker/"},{"name":"Hexo","slug":"Hexo","permalink":"http://code.cookily.cn/tags/Hexo/"},{"name":"IntelliJ IDEA","slug":"IntelliJ-IDEA","permalink":"http://code.cookily.cn/tags/IntelliJ-IDEA/"},{"name":"Git","slug":"Git","permalink":"http://code.cookily.cn/tags/Git/"},{"name":"Github","slug":"Github","permalink":"http://code.cookily.cn/tags/Github/"},{"name":"Node.js","slug":"Node-js","permalink":"http://code.cookily.cn/tags/Node-js/"},{"name":"MySQL","slug":"MySQL","permalink":"http://code.cookily.cn/tags/MySQL/"},{"name":"Centos 7","slug":"Centos-7","permalink":"http://code.cookily.cn/tags/Centos-7/"},{"name":"内部连接","slug":"内部连接","permalink":"http://code.cookily.cn/tags/内部连接/"},{"name":"外部连接","slug":"外部连接","permalink":"http://code.cookily.cn/tags/外部连接/"}]},{"title":"Centos 7 下 docker 安装 tomcat 和 使用","slug":"Centos 7 下 docker 安装 tomcat 和 使用","date":"2018-02-24T08:59:58.890Z","updated":"2018-02-24T08:59:58.891Z","comments":true,"path":"2018/02/24/Centos 7 下 docker 安装 tomcat 和 使用/","link":"","permalink":"http://code.cookily.cn/2018/02/24/Centos 7 下 docker 安装 tomcat 和 使用/","excerpt":"","text":"参考：阿里云tomcat docker 文档1.首先查看下仓库镜像1docker search tomcat 1234567891011121314151617181920212223242526[root@iZ0p61por0uylmZ ~]# docker search tomcatNAME DESCRIPTION STARS OFFICIAL AUTOMATEDtomcat Apache Tomcat is an open source implementati… 1710 [OK] dordoka/tomcat Ubuntu 14.04, Oracle JDK 8 and Tomcat 8 base… 47 [OK]tomee Apache TomEE is an all-Apache Java EE certif… 44 [OK] davidcaste/alpine-tomcat Apache Tomcat 7/8 using Oracle Java 7/8 with… 24 [OK]consol/tomcat-7.0 Tomcat 7.0.57, 8080, &quot;admin/admin&quot; 17 [OK]cloudesire/tomcat Tomcat server, 6/7/8 15 [OK]bitnami/tomcat Bitnami Tomcat Docker Image 10 [OK]meirwa/spring-boot-tomcat-mysql-app a sample spring-boot app using tomcat and My… 8 [OK]tutum/tomcat Base docker image to run a Tomcat applicatio… 8 jeanblanchard/tomcat Minimal Docker image with Apache Tomcat 8 aallam/tomcat-mysql Debian, Oracle JDK, Tomcat &amp; MySQL 6 [OK]maluuba/tomcat7-java8 Tomcat7 with java8. 1 99taxis/tomcat7 Tomcat7 1 [OK]primetoninc/tomcat Apache tomcat 8.5, 8.0, 7.0 1 [OK]picoded/tomcat7 tomcat7 with jre8 and MANAGER_USER / MANAGER… 0 [OK]oobsri/tomcat8 Testing CI Jobs with different names. 0 s390x/tomcat Apache Tomcat is an open source implementati… 0 fabric8/tomcat-8 Fabric8 Tomcat 8 Image 0 [OK]trollin/tomcat 0 awscory/tomcat tomcat 0 swisstopo/service-print-tomcat backend tomcat for service-print &quot;the true, … 0 qminderapp/tomcat7 Tomcat 7 0 hegand/tomcat docker-tomcat 0 [OK]buravelli9/tomcat-az-standards Tomcat image-AZ 0 2.然后从hub.docker.com或者第三方有加速的docker网站查看tomcat镜像版本阿里云tomcat docker镜像连接1234567891011127.0.82-jre7, 7.0-jre7, 7-jre7, 7.0.82, 7.0, 7 (7/jre7/Dockerfile)7.0.82-jre7-alpine, 7.0-jre7-alpine, 7-jre7-alpine, 7.0.82-alpine, 7.0-alpine, 7-alpine (7/jre7-alpine/Dockerfile)7.0.82-jre8, 7.0-jre8, 7-jre8 (7/jre8/Dockerfile)7.0.82-jre8-alpine, 7.0-jre8-alpine, 7-jre8-alpine (7/jre8-alpine/Dockerfile)8.0.47-jre7, 8.0-jre7, 8.0.47, 8.0 (8.0/jre7/Dockerfile)8.0.47-jre7-alpine, 8.0-jre7-alpine, 8.0.47-alpine, 8.0-alpine (8.0/jre7-alpine/Dockerfile)8.0.47-jre8, 8.0-jre8 (8.0/jre8/Dockerfile)8.0.47-jre8-alpine, 8.0-jre8-alpine (8.0/jre8-alpine/Dockerfile)8.5.24-jre8, 8.5-jre8, 8-jre8, jre8, 8.5.24, 8.5, 8, latest (8.5/jre8/Dockerfile)8.5.24-jre8-alpine, 8.5-jre8-alpine, 8-jre8-alpine, jre8-alpine, 8.5.24-alpine, 8.5-alpine, 8-alpine, alpine (8.5/jre8-alpine/Dockerfile)9.0.2-jre8, 9.0-jre8, 9-jre8, 9.0.2, 9.0, 9 (9.0/jre8/Dockerfile)9.0.2-jre8-alpine, 9.0-jre8-alpine, 9-jre8-alpine, 9.0.2-alpine, 9.0-alpine, 9-alpine (9.0/jre8-alpine/Dockerfile) 3.我选择8.5.24版本下载1docker pull tomcat:8.5.24 12345678910111213141516[root@iZ0p61por0uylmZ ~]# docker pull tomcat:8.5.248.5.24: Pulling from library/tomcat723254a2c089: Pull complete abe15a44e12f: Pull complete 409a28e3cc3d: Pull complete a9511c68044a: Pull complete 9d1b16e30bc8: Pull complete 0fc5a09c9242: Pull complete d34976006493: Pull complete 3b70003f0c10: Pull complete bc7887582e2e: Pull complete d2ab4f165865: Pull complete f671595c8b4b: Pull complete cc8cdb15e511: Pull complete Digest: sha256:e39e0a3982b6de106d95b4e06d6e94fdc5ec7d6cadf310f7fae02e4e182cd830Status: Downloaded newer image for tomcat:8.5.24 4.查看本地镜像 可以看到已经在本地仓库1docker images 123[root@iZ0p61por0uylmZ ~]# docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEtomcat 8.5.24 66bbed06c8cd 2 weeks ago 557MB 5.开启tomcat一个容器(就是我们平常所说的实例)1docker run --name tomcat8.5.24 -d -p 8080:8080 tomcat:8.5.24 123456[root@iZ0p61por0uylmZ ~]# docker run --name tomcat8.5.24 -d -p 8080:8080 tomcat:8.5.24432bd371973ffb651083142f79913b675a8c400a7d011e7a5d3b4f70817f25b2[root@iZ0p61por0uylmZ ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES432bd371973f tomcat:8.5.24 &quot;catalina.sh run&quot; 56 seconds ago Up 54 seconds 0.0.0.0:8080-&gt;8080/tcp tomcat8.5.24 6.tomcat远程访问外网地址:8080如果是阿里云esc服务器,安全组8080端口要开放7.如果是在同一个docker下的容器要连接tomcat7.1别名访问比如tomcat2连接tomcat,那tomcat2的启动参数里要加–linl连接1docker run --name tomcat2重新命名 --link tomcat:别名 -d tomcat2仓库名 123在tomcat2容器里的tomcat连接地址就写为--&gt;别名:8080比如：http://192.168.123.123:8080就写为:http://别名:8080 7.2内网ip访问获取tomcat容器内网ip地址1docker inspect --format=&apos;&#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;&apos; tomcat8.5.24 123456[root@iZ0p61por0uylmZ ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES432bd371973f tomcat:8.5.24 &quot;catalina.sh run&quot; 12 minutes ago Up 12 minutes 0.0.0.0:8080-&gt;8080/tcp tomcat8.5.241794aed7cfe1 mysql:5.6.38 &quot;docker-entrypoint.s…&quot; 3 hours ago Up About an hour 0.0.0.0:3306-&gt;3306/tcp mysql5.6.38[root@iZ0p61por0uylmZ ~]# docker inspect --format=&apos;&#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;&apos; tomcat8.5.24172.17.0.3 123在tomcat容器里的mysql连接地址就写为:内网ip比如：jdbc:mysql://192.168.123.123:3306jdbc:mysql://172.17.0.3:3306 8.进入tomcat容器1docker exec -it 容器名字或者id /bin/bash 123456[root@iZ0p61por0uylmZ ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES432bd371973f tomcat:8.5.24 &quot;catalina.sh run&quot; 38 minutes ago Up 38 minutes 0.0.0.0:8080-&gt;8080/tcp tomcat8.5.24[root@iZ0p61por0uylmZ ~]# docker exec -it 432bd371973f /bin/bashroot@432bd371973f:/usr/local/tomcat# 拿到shell,收工","categories":[{"name":"Docker","slug":"Docker","permalink":"http://code.cookily.cn/categories/Docker/"},{"name":"Tomcat","slug":"Docker/Tomcat","permalink":"http://code.cookily.cn/categories/Docker/Tomcat/"},{"name":"Centos 7","slug":"Docker/Tomcat/Centos-7","permalink":"http://code.cookily.cn/categories/Docker/Tomcat/Centos-7/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"http://code.cookily.cn/tags/Docker/"},{"name":"Tomcat，Centos 7","slug":"Tomcat，Centos-7","permalink":"http://code.cookily.cn/tags/Tomcat，Centos-7/"},{"name":"Hexo","slug":"Hexo","permalink":"http://code.cookily.cn/tags/Hexo/"},{"name":"IntelliJ IDEA","slug":"IntelliJ-IDEA","permalink":"http://code.cookily.cn/tags/IntelliJ-IDEA/"},{"name":"Git","slug":"Git","permalink":"http://code.cookily.cn/tags/Git/"},{"name":"Github","slug":"Github","permalink":"http://code.cookily.cn/tags/Github/"},{"name":"Node.js","slug":"Node-js","permalink":"http://code.cookily.cn/tags/Node-js/"}]}]}