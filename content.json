{"meta":{"title":"樑仔实践学习笔记","subtitle":"天行健，君子于自强不息","description":"学习笔记，实践笔记","author":"樑仔","url":"http://code.cookily.cn"},"pages":[{"title":"404","date":"2018-02-23T16:10:59.000Z","updated":"2018-02-23T08:10:59.808Z","comments":true,"path":"404/index.html","permalink":"http://code.cookily.cn/404/index.html","excerpt":"","text":""},{"title":"关于我","date":"2018-02-23T16:11:28.000Z","updated":"2018-02-24T06:55:01.868Z","comments":true,"path":"about/index.html","permalink":"http://code.cookily.cn/about/index.html","excerpt":"","text":"理论上实践才是技术，停留在口头跟纸上谈兵有何区别！"},{"title":"tags","date":"2018-02-23T16:13:16.000Z","updated":"2018-02-23T08:13:16.662Z","comments":true,"path":"tags/index.html","permalink":"http://code.cookily.cn/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Centos 7 下 docker 安装MySQL 和使用 内部连接和外部连接","slug":"Centos 7 下 docker 安装mysql 和使用 内部连接和外部连接","date":"2018-02-24T07:06:22.921Z","updated":"2018-02-24T07:06:22.922Z","comments":true,"path":"2018/02/24/Centos 7 下 docker 安装mysql 和使用 内部连接和外部连接/","link":"","permalink":"http://code.cookily.cn/2018/02/24/Centos 7 下 docker 安装mysql 和使用 内部连接和外部连接/","excerpt":"","text":"参考：阿里mysql docker 文档1.首先查看下仓库镜像1docker search mysql 123456789101112131415161718192021222324252627[root@iZ0p61por0uylmZ ~]# docker search mysqlNAME DESCRIPTION STARS OFFICIAL AUTOMATEDmysql MySQL is a widely used, open-source relation… 5676 [OK] mariadb MariaDB is a community-developed fork of MyS… 1760 [OK] mysql/mysql-server Optimized MySQL Server Docker images. Create… 390 [OK]zabbix/zabbix-server-mysql Zabbix Server with MySQL database support 78 [OK]hypriot/rpi-mysql RPi-compatible Docker Image with Mysql 78 centurylink/mysql Image containing mysql. Optimized to be link… 58 [OK]zabbix/zabbix-web-nginx-mysql Zabbix frontend based on Nginx web-server wi… 41 [OK]tutum/mysql Base docker image to run a MySQL database se… 31 1and1internet/ubuntu-16-nginx-php-phpmyadmin-mysql-5 ubuntu-16-nginx-php-phpmyadmin-mysql-5 25 [OK]mysql/mysql-cluster Experimental MySQL Cluster Docker images. Cr… 19 centos/mysql-57-centos7 MySQL 5.7 SQL database server 17 schickling/mysql-backup-s3 Backup MySQL to S3 (supports periodic backup… 16 [OK]linuxserver/mysql A Mysql container, brought to you by LinuxSe… 14 zabbix/zabbix-proxy-mysql Zabbix proxy with MySQL database support 10 [OK]centos/mysql-56-centos7 MySQL 5.6 SQL database server 7 openshift/mysql-55-centos7 DEPRECATED: A Centos7 based MySQL v5.5 image… 6 circleci/mysql MySQL is a widely used, open-source relation… 3 frodenas/mysql A Docker Image for MySQL 3 [OK]dsteinkopf/backup-all-mysql backup all DBs in a mysql server 3 [OK]inferlink/landmark-mysql landmark-mysql 0 [OK]cloudposse/mysql Improved `mysql` service with support for `m… 0 [OK]cloudfoundry/cf-mysql-ci Image used in CI of cf-mysql-release 0 openzipkin/zipkin-mysql Mirror of https://quay.io/repository/openzip… 0 astronomerio/mysql-sink MySQL sink 0 [OK]ansibleplaybookbundle/mysql-apb An APB which deploys RHSCL MySQL 0 [OK] 2.然后从hub.docker.com或者第三方有加速的docker网站查看mysql镜像版本阿里mysql docker镜像连接12348.0.3, 8.0, 8 (8.0/Dockerfile)5.7.20, 5.7, 5, latest (5.7/Dockerfile)5.6.38, 5.6 (5.6/Dockerfile)5.5.58, 5.5 (5.5/Dockerfile) 3.我选择5.6.38版本下载1docker pull mysql:5.6.38 1234567891011121314[root@iZ0p61por0uylmZ ~]# docker pull mysql:5.6.385.6.38: Pulling from library/mysqlf49cf87b52c1: Pull complete 78032de49d65: Pull complete 837546b20bc4: Pull complete 9b8316af6cc6: Pull complete 28dd7bab809d: Pull complete 8b95be8b8d36: Pull complete 67ee8c6f60b5: Pull complete 74616d0d8b72: Pull complete 6246d987d47e: Pull complete 66cd90934fab: Pull complete Digest: sha256:078c9e0486639831d44c18ec8bc545e20ca74419822387c3eab2ea54a8e71515Status: Downloaded newer image for mysql:5.6.38 4.查看本地镜像 可以看到已经在本地仓库1docker images 123[root@iZ0p61por0uylmZ ~]# docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEmysql 5.6.38 15a5ee56ec55 6 weeks ago 299MB 5.开启mysql一个容器(就是我们平常所说的实例)1docker run --name mysql5.6.38 -e MYSQL_ROOT_PASSWORD=root -d -p 3306:3306 mysql:5.6.38 1-e MYSQL_ROOT_PASSWORD=root 初始化密码 123456[root@iZ0p61por0uylmZ ~]# docker run --name mysql5.6.38 -e MYSQL_ROOT_PASSWORD=root -d -p 3306:3306 mysql:5.6.381794aed7cfe17c7a8df7c1403a25feaecced3ccbef3844c9240bb0c8e27c2b85[root@iZ0p61por0uylmZ ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES1794aed7cfe1 mysql:5.6.38 &quot;docker-entrypoint.s…&quot; 7 seconds ago Up 6 seconds 0.0.0.0:3306-&gt;3306/tcp mysql5.6.38 6.mysql远程连接navicat远程连接mysql容器 –&gt; 外网地址:3306如果是阿里云esc服务器,安全组3306端口要开放7.如果是在同一个docker下的容器要连接mysql7.1别名访问比如tomcat连接mysql,那tomcat的启动参数里要加–linl连接1docker run --name tomcat重新命名 --link mysql5.6.38:别名 -d tomcat仓库名 123在tomcat容器里的mysql连接地址就写为:别名比如：jdbc:mysql://192.168.123.123:3306就写为:jdbc:mysql://别名:3306 7.2内网ip访问获取mysql容器内网ip地址1docker inspect --format=&apos;&#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;&apos; mysql5.6.38 123456[root@iZ0p61por0uylmZ ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES432bd371973f tomcat:8.5.24 &quot;catalina.sh run&quot; 12 minutes ago Up 12 minutes 0.0.0.0:8080-&gt;8080/tcp tomcat8.5.241794aed7cfe1 mysql:5.6.38 &quot;docker-entrypoint.s…&quot; 3 hours ago Up About an hour 0.0.0.0:3306-&gt;3306/tcp mysql5.6.38[root@iZ0p61por0uylmZ ~]# docker inspect --format=&apos;&#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;&apos; mysql5.6.38172.17.0.2 123在tomcat容器里的mysql连接地址就写为:内网ip比如：jdbc:mysql://192.168.123.123:3306jdbc:mysql://172.17.0.2:3306 8.进入mysql容器1docker exec -it 容器id或者容器名字 /bin/bash 123456[root@iZ0p61por0uylmZ ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES1794aed7cfe1 mysql:5.6.38 &quot;docker-entrypoint.s…&quot; 29 minutes ago Up 29 minutes 0.0.0.0:3306-&gt;3306/tcp mysql5.6.38[root@iZ0p61por0uylmZ ~]# docker exec -it 1794aed7cfe1 /bin/bashroot@1794aed7cfe1:/# 拿到shell,收工","categories":[{"name":"Docker","slug":"Docker","permalink":"http://code.cookily.cn/categories/Docker/"},{"name":"MySQL","slug":"Docker/MySQL","permalink":"http://code.cookily.cn/categories/Docker/MySQL/"},{"name":"Centos 7","slug":"Docker/MySQL/Centos-7","permalink":"http://code.cookily.cn/categories/Docker/MySQL/Centos-7/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"http://code.cookily.cn/tags/Docker/"},{"name":"Hexo","slug":"Hexo","permalink":"http://code.cookily.cn/tags/Hexo/"},{"name":"IntelliJ IDEA","slug":"IntelliJ-IDEA","permalink":"http://code.cookily.cn/tags/IntelliJ-IDEA/"},{"name":"Git","slug":"Git","permalink":"http://code.cookily.cn/tags/Git/"},{"name":"Github","slug":"Github","permalink":"http://code.cookily.cn/tags/Github/"},{"name":"Node.js","slug":"Node-js","permalink":"http://code.cookily.cn/tags/Node-js/"},{"name":"MySQL，Centos 7","slug":"MySQL，Centos-7","permalink":"http://code.cookily.cn/tags/MySQL，Centos-7/"},{"name":"内部连接","slug":"内部连接","permalink":"http://code.cookily.cn/tags/内部连接/"},{"name":"外部连接","slug":"外部连接","permalink":"http://code.cookily.cn/tags/外部连接/"}]},{"title":"Centos 7 下 docker 安装 tomcat 和 使用","slug":"Centos 7 下 docker 安装 tomcat 和 使用","date":"2018-02-24T07:02:22.153Z","updated":"2018-02-24T07:02:22.155Z","comments":true,"path":"2018/02/24/Centos 7 下 docker 安装 tomcat 和 使用/","link":"","permalink":"http://code.cookily.cn/2018/02/24/Centos 7 下 docker 安装 tomcat 和 使用/","excerpt":"","text":"参考：阿里云tomcat docker 文档1.首先查看下仓库镜像1docker search tomcat 1234567891011121314151617181920212223242526[root@iZ0p61por0uylmZ ~]# docker search tomcatNAME DESCRIPTION STARS OFFICIAL AUTOMATEDtomcat Apache Tomcat is an open source implementati… 1710 [OK] dordoka/tomcat Ubuntu 14.04, Oracle JDK 8 and Tomcat 8 base… 47 [OK]tomee Apache TomEE is an all-Apache Java EE certif… 44 [OK] davidcaste/alpine-tomcat Apache Tomcat 7/8 using Oracle Java 7/8 with… 24 [OK]consol/tomcat-7.0 Tomcat 7.0.57, 8080, &quot;admin/admin&quot; 17 [OK]cloudesire/tomcat Tomcat server, 6/7/8 15 [OK]bitnami/tomcat Bitnami Tomcat Docker Image 10 [OK]meirwa/spring-boot-tomcat-mysql-app a sample spring-boot app using tomcat and My… 8 [OK]tutum/tomcat Base docker image to run a Tomcat applicatio… 8 jeanblanchard/tomcat Minimal Docker image with Apache Tomcat 8 aallam/tomcat-mysql Debian, Oracle JDK, Tomcat &amp; MySQL 6 [OK]maluuba/tomcat7-java8 Tomcat7 with java8. 1 99taxis/tomcat7 Tomcat7 1 [OK]primetoninc/tomcat Apache tomcat 8.5, 8.0, 7.0 1 [OK]picoded/tomcat7 tomcat7 with jre8 and MANAGER_USER / MANAGER… 0 [OK]oobsri/tomcat8 Testing CI Jobs with different names. 0 s390x/tomcat Apache Tomcat is an open source implementati… 0 fabric8/tomcat-8 Fabric8 Tomcat 8 Image 0 [OK]trollin/tomcat 0 awscory/tomcat tomcat 0 swisstopo/service-print-tomcat backend tomcat for service-print &quot;the true, … 0 qminderapp/tomcat7 Tomcat 7 0 hegand/tomcat docker-tomcat 0 [OK]buravelli9/tomcat-az-standards Tomcat image-AZ 0 2.然后从hub.docker.com或者第三方有加速的docker网站查看tomcat镜像版本阿里云tomcat docker镜像连接1234567891011127.0.82-jre7, 7.0-jre7, 7-jre7, 7.0.82, 7.0, 7 (7/jre7/Dockerfile)7.0.82-jre7-alpine, 7.0-jre7-alpine, 7-jre7-alpine, 7.0.82-alpine, 7.0-alpine, 7-alpine (7/jre7-alpine/Dockerfile)7.0.82-jre8, 7.0-jre8, 7-jre8 (7/jre8/Dockerfile)7.0.82-jre8-alpine, 7.0-jre8-alpine, 7-jre8-alpine (7/jre8-alpine/Dockerfile)8.0.47-jre7, 8.0-jre7, 8.0.47, 8.0 (8.0/jre7/Dockerfile)8.0.47-jre7-alpine, 8.0-jre7-alpine, 8.0.47-alpine, 8.0-alpine (8.0/jre7-alpine/Dockerfile)8.0.47-jre8, 8.0-jre8 (8.0/jre8/Dockerfile)8.0.47-jre8-alpine, 8.0-jre8-alpine (8.0/jre8-alpine/Dockerfile)8.5.24-jre8, 8.5-jre8, 8-jre8, jre8, 8.5.24, 8.5, 8, latest (8.5/jre8/Dockerfile)8.5.24-jre8-alpine, 8.5-jre8-alpine, 8-jre8-alpine, jre8-alpine, 8.5.24-alpine, 8.5-alpine, 8-alpine, alpine (8.5/jre8-alpine/Dockerfile)9.0.2-jre8, 9.0-jre8, 9-jre8, 9.0.2, 9.0, 9 (9.0/jre8/Dockerfile)9.0.2-jre8-alpine, 9.0-jre8-alpine, 9-jre8-alpine, 9.0.2-alpine, 9.0-alpine, 9-alpine (9.0/jre8-alpine/Dockerfile) 3.我选择8.5.24版本下载1docker pull tomcat:8.5.24 12345678910111213141516[root@iZ0p61por0uylmZ ~]# docker pull tomcat:8.5.248.5.24: Pulling from library/tomcat723254a2c089: Pull complete abe15a44e12f: Pull complete 409a28e3cc3d: Pull complete a9511c68044a: Pull complete 9d1b16e30bc8: Pull complete 0fc5a09c9242: Pull complete d34976006493: Pull complete 3b70003f0c10: Pull complete bc7887582e2e: Pull complete d2ab4f165865: Pull complete f671595c8b4b: Pull complete cc8cdb15e511: Pull complete Digest: sha256:e39e0a3982b6de106d95b4e06d6e94fdc5ec7d6cadf310f7fae02e4e182cd830Status: Downloaded newer image for tomcat:8.5.24 4.查看本地镜像 可以看到已经在本地仓库1docker images 123[root@iZ0p61por0uylmZ ~]# docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEtomcat 8.5.24 66bbed06c8cd 2 weeks ago 557MB 5.开启tomcat一个容器(就是我们平常所说的实例)1docker run --name tomcat8.5.24 -d -p 8080:8080 tomcat:8.5.24 123456[root@iZ0p61por0uylmZ ~]# docker run --name tomcat8.5.24 -d -p 8080:8080 tomcat:8.5.24432bd371973ffb651083142f79913b675a8c400a7d011e7a5d3b4f70817f25b2[root@iZ0p61por0uylmZ ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES432bd371973f tomcat:8.5.24 &quot;catalina.sh run&quot; 56 seconds ago Up 54 seconds 0.0.0.0:8080-&gt;8080/tcp tomcat8.5.24 6.tomcat远程访问外网地址:8080如果是阿里云esc服务器,安全组8080端口要开放7.如果是在同一个docker下的容器要连接tomcat7.1别名访问比如tomcat2连接tomcat,那tomcat2的启动参数里要加–linl连接1docker run --name tomcat2重新命名 --link tomcat:别名 -d tomcat2仓库名 123在tomcat2容器里的tomcat连接地址就写为--&gt;别名:8080比如：http://192.168.123.123:8080就写为:http://别名:8080 7.2内网ip访问获取tomcat容器内网ip地址1docker inspect --format=&apos;&#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;&apos; tomcat8.5.24 123456[root@iZ0p61por0uylmZ ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES432bd371973f tomcat:8.5.24 &quot;catalina.sh run&quot; 12 minutes ago Up 12 minutes 0.0.0.0:8080-&gt;8080/tcp tomcat8.5.241794aed7cfe1 mysql:5.6.38 &quot;docker-entrypoint.s…&quot; 3 hours ago Up About an hour 0.0.0.0:3306-&gt;3306/tcp mysql5.6.38[root@iZ0p61por0uylmZ ~]# docker inspect --format=&apos;&#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;&apos; tomcat8.5.24172.17.0.3 123在tomcat容器里的mysql连接地址就写为:内网ip比如：jdbc:mysql://192.168.123.123:3306jdbc:mysql://172.17.0.3:3306 8.进入tomcat容器1docker exec -it 容器名字或者id /bin/bash 123456[root@iZ0p61por0uylmZ ~]# docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES432bd371973f tomcat:8.5.24 &quot;catalina.sh run&quot; 38 minutes ago Up 38 minutes 0.0.0.0:8080-&gt;8080/tcp tomcat8.5.24[root@iZ0p61por0uylmZ ~]# docker exec -it 432bd371973f /bin/bashroot@432bd371973f:/usr/local/tomcat# 拿到shell,收工","categories":[{"name":"Docker","slug":"Docker","permalink":"http://code.cookily.cn/categories/Docker/"},{"name":"Tomcat","slug":"Docker/Tomcat","permalink":"http://code.cookily.cn/categories/Docker/Tomcat/"},{"name":"Centos 7","slug":"Docker/Tomcat/Centos-7","permalink":"http://code.cookily.cn/categories/Docker/Tomcat/Centos-7/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"http://code.cookily.cn/tags/Docker/"},{"name":"Tomcat，Centos 7","slug":"Tomcat，Centos-7","permalink":"http://code.cookily.cn/tags/Tomcat，Centos-7/"},{"name":"Hexo","slug":"Hexo","permalink":"http://code.cookily.cn/tags/Hexo/"},{"name":"IntelliJ IDEA","slug":"IntelliJ-IDEA","permalink":"http://code.cookily.cn/tags/IntelliJ-IDEA/"},{"name":"Git","slug":"Git","permalink":"http://code.cookily.cn/tags/Git/"},{"name":"Github","slug":"Github","permalink":"http://code.cookily.cn/tags/Github/"},{"name":"Node.js","slug":"Node-js","permalink":"http://code.cookily.cn/tags/Node-js/"}]},{"title":"这是文章标题","slug":"中文","date":"2018-02-24T06:51:11.976Z","updated":"2018-02-24T06:51:11.977Z","comments":true,"path":"2018/02/24/中文/","link":"","permalink":"http://code.cookily.cn/2018/02/24/中文/","excerpt":"","text":"#标题1bash #标题1bash 1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[{"name":"Hexo","slug":"Hexo","permalink":"http://code.cookily.cn/categories/Hexo/"},{"name":"中文","slug":"Hexo/中文","permalink":"http://code.cookily.cn/categories/Hexo/中文/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://code.cookily.cn/tags/Hexo/"},{"name":"IntelliJ IDEA","slug":"IntelliJ-IDEA","permalink":"http://code.cookily.cn/tags/IntelliJ-IDEA/"},{"name":"Git","slug":"Git","permalink":"http://code.cookily.cn/tags/Git/"},{"name":"Github","slug":"Github","permalink":"http://code.cookily.cn/tags/Github/"},{"name":"Node.js","slug":"Node-js","permalink":"http://code.cookily.cn/tags/Node-js/"}]},{"title":"Hello World","slug":"hello-world","date":"2018-02-23T08:52:49.383Z","updated":"2018-02-23T08:52:49.384Z","comments":true,"path":"2018/02/23/hello-world/","link":"","permalink":"http://code.cookily.cn/2018/02/23/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]},{"title":"这是文章标题","slug":"new","date":"2018-02-23T08:24:43.584Z","updated":"2018-02-23T08:24:43.585Z","comments":true,"path":"2018/02/23/new/","link":"","permalink":"http://code.cookily.cn/2018/02/23/new/","excerpt":"","text":"1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[{"name":"Hexo","slug":"Hexo","permalink":"http://code.cookily.cn/categories/Hexo/"},{"name":"IntelliJ IDEA","slug":"Hexo/IntelliJ-IDEA","permalink":"http://code.cookily.cn/categories/Hexo/IntelliJ-IDEA/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"http://code.cookily.cn/tags/Hexo/"},{"name":"IntelliJ IDEA","slug":"IntelliJ-IDEA","permalink":"http://code.cookily.cn/tags/IntelliJ-IDEA/"},{"name":"Git","slug":"Git","permalink":"http://code.cookily.cn/tags/Git/"},{"name":"Github","slug":"Github","permalink":"http://code.cookily.cn/tags/Github/"},{"name":"Node.js","slug":"Node-js","permalink":"http://code.cookily.cn/tags/Node-js/"}]}]}